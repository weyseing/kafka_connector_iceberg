{
  "connector.class": "org.apache.iceberg.connect.IcebergSinkConnector",
  "tasks.max": "1",
  
  "topics": "stream_order_intake",

  "iceberg.catalog.catalog-impl": "org.apache.iceberg.aws.glue.GlueCatalog",
  "iceberg.catalog.io-impl": "org.apache.iceberg.aws.s3.S3FileIO",
  "iceberg.catalog.warehouse": "s3://kafka-iceberg-107698500998/",
  "iceberg.tables": "iceberg_db1.order",

  "iceberg.tables.auto-create-enabled": "true",
  "iceberg.tables.evolve-schema-enabled": "true",
  "iceberg.tables.write.format": "parquet",
  "iceberg.control.commit.interval-ms": "10000",
  "iceberg.tables.commit.size-rows": "10000",

  "iceberg.tables.default.partition-spec": "BUYER_ID",
  "iceberg.tables.upsert-mode-enabled": "true",
  "iceberg.table.iceberg_db1.order.id-columns": "id",

  "value.converter": "io.confluent.connect.avro.AvroConverter",
  "value.converter.schemas.enable": "true",
  "value.converter.schema.registry.url": "$SCHEMA_REGISTRY_URL",
  "value.converter.basic.auth.credentials.source": "USER_INFO",
  "value.converter.schema.registry.basic.auth.user.info": "$SCHEMA_REGISTRY_SECRET",

  "key.converter": "io.confluent.connect.avro.AvroConverter",
  "key.converter.schemas.enable": "true",
  "key.converter.schema.registry.url": "$SCHEMA_REGISTRY_URL",
  "key.converter.basic.auth.credentials.source": "USER_INFO",
  "key.converter.schema.registry.basic.auth.user.info": "$SCHEMA_REGISTRY_SECRET",
  
  "errors.log.enable": "true",
  "errors.tolerance": "all",
  "errors.deadletterqueue.context.headers.enable": "true",
  "errors.deadletterqueue.topic.name": "DEFAULT",
  "errors.deadletterqueue.topic.replication.factor": "$TOPIC_REPLICATION"
}